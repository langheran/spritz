Proceedings of the International Conference on Machine Vision and Machine Learning Prague, Czech Republic, August 14-15, 2014 Paper No. 68
Unsupervised Recognition of Parking Lot Areas
Antonio H. Mexas, Maurício Marengoni Universidade Presbiteriana Mackenzie
Rua da Consolação, 930, São Paulo, Brazil antonio.mexas@gmail.com; mmarengoni@mackenzie.br
Abstract - Object detection is essential for decision making in a remote sensing system. The areas of interest to detect in this type of application are buildings, streets, bridges, airports, ports and parking lot, the latter will be discussed in this paper. Using manual techniques to detect parking lots can become laborious and lead to a high error detection rate. This paper examines algorithms relating to the identification and recognition of parking lot areas. In this paper the best set of parameters are analysed in order to achieve high accurate results. Finally, an algorithm is proposed for recognition of parking lot areas, which considers important variables such as vehicle and parking spaces size, image resolution and camera zoom.
Keywords: Image processing, Image segmentation, Images analysis and Pattern recognition.
1. Introduction The detection of urban areas are becoming more important in computer vision and remote sensing
applications. Several studies have been conducted in this knowledge area, because there are strategic, military and civilian interests in detecting and monitoring these types of environments. Examples of strategic interest are systems that identify parking lot areas from an aerial image in order to help the driver leave a street with heavy traffic; GIS systems that identify parking lot areas and identify how many cars will fit in a particular parking lot are useful for city planning porpouse , among others.
The literature present several papers for road extraction (Valero, 2009), bridge detection (Lomenie et al., 2003), buildings (Sirmacek and Unsalan, 2011), ports (Chen, 2010), airports (Tao et al., 2011), and parking lots (Seo et al., 2009).
The papers surveyed during the development of this project, in which the goal is the parking lot areas recognition, neither describe the algorithms nor the set of parameters used in enough details so their results could be reproduced.
The work presented here are strongly based on two papers (Seo et al., 2009, Wang and Hanson, 1998),. For region detection of parking lot areas were applied the pre-processing steps for image enhancement such as low-pass filtering and morphological operators (Gonzalez and Woods, 2010). The detection of the parking lot areas, which are represented by a set of marking locations is based on (Seo et al., 2009), and the detection of the parking lot areas, which are represented by a set of parked vehicles is based on (Wang and Hanson, 1998). An analysis of the detection rate and identification of the entire park lot area is presented at the end of this paper.
This study uses computer vision tools to contribute to the algorithms development for identifying parking lot areas in order to achieve the highest detection rate possible. This paper presents detailed results of the methodology used and the best set of parameters used.
In previous work it was possible to see that one of the major issues on identifying parking lot areas was related to the combination of parking lot slots detected either by marks on the ground or by cars parked there. This paper shows a hybrid approach that combines these two types of information in order to detect parking lot areas in urban regions.
The paper is organized as follows: Chapter 2 presents the methods analysed by the author and the definition of the algorithm for recognition of parking lot areas. Chapter 3 presents the results obtained, and Chapter 4 shows the conclusion of this work.
68-1

2. Proposed Method The first step is divided into two tasks that are combined to identify a parking lot area. The first task
consists in identify cars parked in a certain area (which will be described in section 2.1). The second task, which is executed in parallel, is responsible for identify markings of parking spaces on the ground (this task will be described in section 2.2). At the end of these tasks the system selects only candidate points that are within the parking lot area. For this step a combination of computer vision techniques such as morphological operations, segmentation and filtering are used and best results are selected.
The second step is related to knowledge representation and decision making through the system context. This step validates candidate points and ground areas, and select only the closest points between them, as described in section 2.3 of this chapter.
To search for parking spaces within a parking lot the system checks for two features in parallel, vehicles parked and vacancies without vehicles parked. If there is an area found in two searches, then this area is marked as a candidate area.
There are several problems reported in the related works when processing an image in order to find parking lot areas. Among them, it is possible to highlight the low-resolution images that make the process of vacancies identification more difficult. Illumination problems also interfere with the identification process, such as shadows of buildings in the parking lot area. The dense vegetation in the surroundings can be confused with vehicles at the border, as well as buildings with the same shade of grey as asphalt of the parking lot area. Streets near parking lots can be identified as part of parking lot areas, because it contains the same subjects expected to be found in parking lot areas, asphalt and cars. Tags used in traffic, such as crosswalks, may interfere with the slot marks of parking spaces.
In order to minimize the problems described above for identification of parking spaces in this work parking spaces will be identified by grouping aligned parking spaces and streets for the movement of vehicles within the parking lot area.
According to the study conducted by Brazil Park, a Brazilian parking company (2013) in the city of São Paulo, the dimensions of parking spaces are divided into three categories: the small space is 2.10 meters wide and 4.20 meters long, the medium space is 2.20 meters wide and 4.70 meters long and the large space is 2.50 meters wide and 5.50 meters long. Based on this study, the vacancies are set with an average dimension of 2.30 x 5.00 meters. This information will be used in the search process by parked cars and cars without vacancies described in section 2.2 and 2.3 below.
The image examples used in this work are high-resolution aerial images with 1000 x 1000 pixels with an image resolution of 15 cm, as shown in Figure 1.
Fig. 1. Example of input image.
68-2

2.1. Identification of Parked Vehicles The first step in this module is the image pre-processing, where the image is prepared to find parked
vehicles. The ideas used here were based on the models described by Wang and Hanson (1998) and Seo et al.(2009), where both identify parked cars to compose the parking lot areas.
To choose the best method for the pre-processing step several sequences were tested. The sequence described here was defined empirically among all the filters and morphological operations tested in the input image, some of the sequence combinations tested are:
· Opening with a structuring element of 3x3 followed by a thresholding with value 150. · Thresholding with value 150. · A 3x3 box car filter, followed by a thresholding with value 150. · Dilation with a structuring element of 3x3, and a thresholding with value 150. · Erosion with a structuring element of 3x3, and a thresholding with value 150. · Closing with a structuring element of 3x3, and a thresholding with value 150. The method that presented the best results was the implementation of an opening with a structuring element of 5x5, followed by a thresholding with a value 200. For this pre-processing set the resulting image had less noise and areas that are not parking lots were ignored. Identify areas of asphalt can help to find a parking lot area as this is the material most used for the ground. Once the system detect a parking spot or a parked car checking for ground color or texture can help on taking a decision about the area detected. With this validation the algorithm increases the hit rate dropping points identified outside of an asphalt area, which would not be a parked car or a parking spot. To identify areas of asphalt, the binarization by threshoulding was used in combination with the mean filter with size 75x75. The cut value used in the binarization was 120.
Fig. 2. Result of the identification of the points that correspond to vehicles.
68-3

Fig. 3. Results of identification of areas of asphalt.
The search for cars in the possible parking areas of an image depends on the implementation of the pre-processing step. Based on the result of the pre-processing step, a search is started in the neighbourhood area in the image (Gonzalez and Woods, 2010). Because the images show little noise, most of the identified points are possible vehicles. The pre-processing step makes reduces the area that represent parked vehicles these areas has an approximate size of 5x5 pixels.
The neighbourhood search starts in the central point, where the algorithm looks for 2 pixels to the right and 2 pixels to the left with values equal to 255 (white). Once these points are located, the algorithm looks for the end of the car spot, which means that at most 5 pixels on the left and on the right must have completed the point and the value should have the minimum intensity. This search process is represented in Figure 4.
Fig. 4. Representation of the search for parked vehicles.
This search process is executed horizontally and vertically, and only the points that satisfy the two searches are selected as candidate points. Thus, the search can be executed for cars that are parked at any angle or position within the parking lot area.
2.2. Identification of Parking Slots without Parked Cars The identification of parking slots without parked cars starts also by a pre-processing step of the
input image, which runs in parallel to the identification of parked vehicles. The same input image is used, and this step was based on the model presented by Seo et al.(2009), where the algorithm finds the tracks in the ground to subsequently build a parking lot area completely.
The marking edges in the ground are identified using the Canny algorithm (Canny, 1986) which presents better results than the Sobel filter (Gonzalez and Woods, 2010) in searches to parking slots
68-4

without parked cars. Several sequences of operators were tested in order to detect parking slots without parked cars combined with the detection of parking slots with parked cars. Some of these sequences combine morphological operations to achieve the best results, and are listed below:
· Opening with structuring element of 5x5, and the Canny operator with minimum threshold of 240 and maximum threshold of 245.
· The Canny operator with minimum threshold of 240 and maximum threshold of 245. · The Canny operator with minimum threshold of 280 and maximum threshold of 285. · Dilation with a structuring element of 5x5, and the Canny operator with minimum threshold of
240 and maximum threshold of 245. · Closing with a structuring element of 5x5, and the Canny operator with minimum threshold of
240 and maximum threshold of 245. · Dilation with a structuring element of 5x5, and the Canny operator with minimum threshold of
280 and maximum threshold of 285.
The method that showed the best results was the implementation of the Canny operator with a minimum threshold of 200 and a maximum threshold of 300. This result was analysed by comparing the pre-
processed image and the results obtained at the end of the process. As in Section 2.1, this step executes the validation to identify if a point is inside or outside of the area of asphalt to increase the hit rate.
Fig. 5. Results of identification of edges found in the image.
The search process in this step is similar to the search performed in the previous one when looking for parking spaces with parked cars. This search also depends on the pre-processing step. The algorithm starts searching for places where there are no vehicles parked, and extract from the ground a set of points that correspond to the parking lines from the marks of vacant slots, as modelled by Seo et al. (2009). According to these work, the car vacancies are rectilinear structures made by the markers of parking spaces.
The search uses a horizontal neighbourhood of 10 pixels to the right and to the left side of minimum intensity values. Then the algorithm searches for horizontal neighbourhood of three pixels, and if only one of these pixels are filled with maximum intensity, then this is a parking spot. This search is translation and rotation invariant of the parking spaces markers, this is because the analysis is performed line by line on the pre-processed image.
68-5

Fig. 6. Representation of the search for parking spaces.
In the same way as the search for parked cars, the search procedure is executed for search vacancies in vertical and horizontal direction, and a candidate point is defined if it appears in both searches, otherwise the candidate point is not considered. 2.3. Identification of Parking Lot
In order to reduce the number of false positives, candidate points are grouped if the distance from one point to all other selected points is at most 100 pixels to, at least, 3 other selected points, then the point is selected.
Using this procedure, the most external points are selected from the final list of candidate points as boundary limits of the area. These points are then used to identify the parking lot area. Figure 7 shows the area defined in the input image using the method described.
Fig. 7. The image presents the result obtained after processing parking lot marks.
3. Results The best configuration found for the pre-processing step for parking lot detection was defined
empirically as:  When looking for parked cars: a morphological openning filter with a squared structured element of size 5x5 followed by a binarization with a threshold value of 200.  When looking for ground marks the Canny method with minimum limit value of 200 and maximum limit value of 300.
68-6

 When looking for asphalt areas a mean filter with a 75 x 75 mask followed by a binarization with a threshold value of 120.

The hybrid approach used in this work shows a better performance than each approach individually when working in high resolution images.
The best result found in the literature has an accuracy rate of 70%. As presented in Table 1 the hybrid approach has an average accuracy of 85 % with a maximum of 95% and a minimum as stated in the literature, 70%.
The proposed system does not depend on any learning method which gives it a processing time gain and does not need to prepare training pictures and ground truth from different angles to get the expected result. The method proposed in this paper needs only a precise configuration of the parameters in each stage of the system.
The accuracy of the system was measured as follows: the points found within the correct parking lot area were classified as correct, those points identified outside the correct parking lot area were classified as false positives and the points of the parking lot areas not identified were classified as false negatives. The results obtained in 5 different images are presented in Table 1:

Table. 1. Table of parking lot areas.

Image
1 2 3 4 5

Area 162259 377850
117980 99161
172342
Average Hit Rate

Hit Rate % 84 95 70 88 91
85

False Positive

Area

%

50559

5

30189

3

31035

3

91164

9

3145

0.3

Average

4

FP

False Negative

Area

%

31408

16

19886

5

50700

30

13521

12

17580

9

Average

15

FN

Total
Area 193.677 397.736
168.680 112.682
189.922

4. Conclusion The main objective of this paper was to analyse different algorithms for parking lot areas recognition,
and select the best practices for application in a hybrid and parameterized algorithm to identify these areas in high resolution images.
Although previous works have used similar approaches, they did not give enough details and they were not applied to high resolution images.
Buildings with several windows aligned, large roofs with a repetitive pattern, avenues or roads with traffic jams and shadows in the surrounding area might reduce the system's performance.
The images used are most top views but the system works with similar results for slight tilted images. The system obtained an average hit rate of 85% without using any training. For the identification of the parking lot areas, the system requires only the input image. Parking lot areas are related to urban areas with a high concentration of people, so a system like this can be used to help in city planning and traffic jam studies.

References Canny, J. (1986). A Computational Approach for Edge Detection. IEEE Trans. Pattern Analysis and
Machine Intelligence, vol. 8, no 6, pp. 679-698. Chen, Q. et al. (2010). Harbor detection of remote sensing images based on model. In: Future Computer
and Communication (ICFCC), 2nd International Conference on. [S.l.: s.n.], 2010. v. 1, p. 322-325. Gonzalez, R. C., Woods, R. E. (2010). Processamento de Imagens Digitais. 3a. ed. [S.l.]: Pearson Prentice
Hall.

68-7

Lomenie, N., Barbeau, J., Trias-Sanz, R. (2003). Integrating textural and geometric information for an automatic bridge detection system, In Geoscience and Remote Sensing Symposium. IGARSS '03. Proceedings. IEEE International, july 2003, vol. 6, pp. 3952 ­ 3954 vol.6.
Seo, Y.-W., Ratliff, N., Urmson, C. (2009). Self-supervised aerial image analysis for extracting parking lot structure. In: Proceedings of International Joint Conference on Artificial Intelligence (IJCAI-09). [S.l.]: AAAI Press.
Sirmacek, B., Unsalan, C. (2011). A probabilistic framework to detect buildings in aerial and satellite images, Geoscience and Remote Sensing, IEEE Transactions on, vol. 49, no. 1, pp. 211 ­221.
Tao, C., Tan, Y., Cai, H., Tian, J. (2011). Airport detection from large ikonos images using clustered sift keypoints and region information, Geoscience and Remote Sensing Letters, IEEE, vol. 8, no. 1, pp. 128 ­132.
Valero, S. et al. (2010). Advanced directional mathematical morphology for the detection of the road network in very high resolution remote sensing images. Pattern Recognition Letters, v. 31, n. 10, p. 1120-1127. ISSN 0167-8655. Pattern Recognition in Remote Sensing. Workshop on Pattern Recognition in Remote Sensing.
Wang, X., Hanson, A. (1998). Parking lot analysis and visualization from aerial images. In: Applications of Computer Vision. WACV '98. Proceedings., Fourth IEEE Workshop on. [S.l.: s.n.], p. 36-41.
Websites: Web-1: http://www.brasilpark.com.br/padraovaga.asp consulted 10 Mar. 2014.
68-8

